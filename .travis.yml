language: php

php:
- 5.4
- 5.5
- 5.6

before_install:
- sudo apt-get update
- sudo apt-get install libcurl4-openssl-dev libjson0-dev
- wget http://get.influxdb.org/influxdb_0.9.0-rc30_amd64.deb 
- sudo useradd influxdb
- sudo dpkg -i influxdb_0.9.0-rc30_amd64.deb
- sudo mkdir /opt/influxdb/shared
- sudo cp ./scripts/influxdb_conf.toml /opt/influxdb/shared/config.toml
- travis_retry sudo service influxdb restart
- sudo service influxdb status

before_script:
- composer selfupdate
- composer install --prefer-source

scripti:
- vendor/bin/phpspec run -n
- vendor/bin/phpunit
